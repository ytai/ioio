subprojects {
  apply plugin: 'maven'

  repositories {
    mavenLocal()
    mavenCentral()
    maven {
      url "http://www.sparetimelabs.com/maven2"
    }
  }

  uploadArchives {
    repositories {
      mavenDeployer {
        repository(url: "file://localhost/tmp/myRepo/")
      }
    }
  }

  // Replace dependendices on modules from the ioio group with local project
  // dependencies.
  afterEvaluate { 
    configurations.each { config-> 
      def ioioDeps = config.dependencies.findAll { it.group == 'ioio' }
      config.dependencies.removeAll { it.group == 'ioio' }
      ioioDeps.each {
        dependencies.add(config.name, dependencies.project(path: ":$it.name"))
      }
    }
  }
}

